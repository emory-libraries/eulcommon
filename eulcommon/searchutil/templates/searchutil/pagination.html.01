{% comment %} Pagination template to display page links for a list of items.
Expects the following variables:
 - items: should be an instance of Page, generated by a Paginator
 - show_pages: a dictionary of pages to display, generated by fa.utils.pages_to_show
 - first_page_label, last_page_label: optional page label overrides; all other
    page label overrides should be passed to show_pages; if not specified,
    the page number will be used.
 {% endcomment %}
{% if items.paginator.count %} {# to suppress if only one page, check items.paginator.num_pages > 1 #}
<div class="pagination">Pages:
{# always link to the first page, even if it is not listed in pages to be shown #}
{% if 1 not in show_pages %}<a href="?{% if url_params %}{{url_params}}&{% endif %}page=1">{% firstof first_page_label 1 %}</a> {% endif %}
{% for page, label in show_pages.items %}
    {% if forloop.first and page > 2 %} ... {% endif %} {# gap before page 1 #}
    {% ifequal page items.number %} {% firstof label page %}
    {% else %}<a href="?{% if url_params %}{{url_params}}&{% endif %}page={{ page }}">{% firstof label page %}</a>
    {% endifequal %}
    {%if forloop.last and page|add:1 < items.paginator.num_pages %} ... {% endif %} {# gap before last page #}
{% endfor %}
{# always link to the last page, even if it is not listed in pages to be shown #}
{% if items.paginator.num_pages not in show_pages %}
  <a href="?{% if url_params %}{{url_params}}&{% endif %}page={{ items.paginator.num_pages }}">{% firstof last_page_label items.paginator.num_pages %}</a>
{% endif %}
</div>
{% endif %}
